!function(e,n){"use strict";n.module("ngIdle",["ngIdle.keepalive","ngIdle.idle","ngIdle.countdown","ngIdle.title","ngIdle.localStorage"]),n.module("ngIdle.keepalive",[]).provider("Keepalive",function(){var e={http:null,interval:600};this.http=function(t){if(!t)throw new Error("Argument must be a string containing a URL, or an object containing the HTTP request configuration.");n.isString(t)&&(t={url:t,method:"GET"}),t.cache=!1,e.http=t};var t=this.interval=function(n){if(n=parseInt(n),isNaN(n)||0>=n)throw new Error("Interval must be expressed in seconds and be greater than 0.");e.interval=n};this.$get=["$rootScope","$log","$interval","$http",function(i,o,r,u){function l(e,n){i.$broadcast("KeepaliveResponse",e,n)}function a(){i.$broadcast("Keepalive"),n.isObject(e.http)&&u(e.http).success(l).error(l)}var d={ping:null};return{_options:function(){return e},setInterval:t,start:function(){return r.cancel(d.ping),d.ping=r(a,1e3*e.interval),d.ping},stop:function(){r.cancel(d.ping)},ping:function(){a()}}}]}),n.module("ngIdle.idle",["ngIdle.keepalive","ngIdle.localStorage"]).provider("Idle",function(){var e={idle:1200,timeout:30,autoResume:"idle",interrupt:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",keepalive:!0},t=this.timeout=function(t){if(t===!1)e.timeout=0;else{if(!(n.isNumber(t)&&t>=0))throw new Error("Timeout must be zero or false to disable the feature, or a positive integer (in seconds) to enable it.");e.timeout=t}};this.interrupt=function(n){e.interrupt=n};var i=this.idle=function(n){if(0>=n)throw new Error("Idle must be a value in seconds, greater than 0.");e.idle=n};this.autoResume=function(n){e.autoResume=n===!0?"idle":n===!1?"off":n},this.keepalive=function(n){e.keepalive=n===!0},this.$get=["$interval","$log","$rootScope","$document","Keepalive","IdleLocalStorage","$window",function(n,o,r,u,l,a,d){function c(){e.keepalive&&(w.running&&l.ping(),l.start())}function s(){e.keepalive&&l.stop()}function g(){w.idling=!w.idling;var t=w.idling?"Start":"End";r.$broadcast("Idle"+t),w.idling?(s(),e.timeout&&(w.countdown=e.timeout,f(),w.timeout=n(f,1e3,e.timeout,!1))):c(),n.cancel(w.idle)}function f(){return w.countdown<=0?void v():(r.$broadcast("IdleWarn",w.countdown),void w.countdown--)}function v(){s(),n.cancel(w.idle),n.cancel(w.timeout),w.idling=!0,w.running=!1,w.countdown=0,r.$broadcast("IdleTimeout")}function m(e,n,t){var i=e.running();e.unwatch(),n(t),i&&e.watch()}function p(){var e=a.get("expiry");return e.time}function h(e){e?a.set("expiry",{id:I,time:e}):a.remove("expiry")}var w={idle:null,timeout:null,idling:!1,running:!1,countdown:null},I=(new Date).getTime(),$={_options:function(){return e},_getNow:function(){return new Date},setIdle:function(e){m(this,i,e)},setTimeout:function(e){m(this,t,e)},isExpired:function(){var e=p();return e&&e<=this._getNow()},running:function(){return w.running},idling:function(){return w.idling},watch:function(t){n.cancel(w.idle),n.cancel(w.timeout);var i=e.timeout?e.timeout:0;t||h(new Date((new Date).getTime()+1e3*(e.idle+i))),w.idling?g():w.running||c(),w.running=!0,w.idle=n(g,1e3*e.idle,0,!1)},unwatch:function(){n.cancel(w.idle),n.cancel(w.timeout),w.idling=!1,w.running=!1,h(null),s()},interrupt:function(n){return w.running?e.timeout&&this.isExpired()?void v():void(("idle"===e.autoResume||"notIdle"===e.autoResume&&!w.idling)&&this.watch(n)):void 0}};u.find("body").on(e.interrupt,function(){$.interrupt()});var b=function(e){if("ngIdle.expiry"===e.key&&e.newValue!==e.oldValue){var n=a.parseJson(e.newValue);if(n.id===I)return;$.interrupt(!0)}};return d.addEventListener?d.addEventListener("storage",b,!1):d.attachEvent("onstorage",b),$}]}),n.module("ngIdle.countdown",[]).directive("idleCountdown",function(){return{restrict:"A",scope:{value:"=idleCountdown"},link:function(e){e.$on("IdleWarn",function(n,t){e.$apply(function(){e.value=t})}),e.$on("IdleTimeout",function(){e.$apply(function(){e.value=0})})}}}),n.module("ngIdle.title",[]).factory("Title",["$document","$interpolate",function(e,t){function i(e,n,t){return Array(n-String(e).length+1).join(t||"0")+e}var o={original:null,idle:"{{minutes}}:{{seconds}} until your session times out!",timedout:"Your session has expired."};return{original:function(e){return n.isUndefined(e)?o.original:void(o.original=e)},store:function(e){(e||!o.original)&&(o.original=this.value())},value:function(t){return n.isUndefined(t)?e[0].title:void(e[0].title=t)},idleMessage:function(e){return n.isUndefined(e)?o.idle:void(o.idle=e)},timedOutMessage:function(e){return n.isUndefined(e)?o.timedout:void(o.timedout=e)},setAsIdle:function(e){this.store();var n={totalSeconds:e};n.minutes=Math.floor(e/60),n.seconds=i(e-60*n.minutes,2),this.value(t(this.idleMessage())(n))},setAsTimedOut:function(){this.store(),this.value(this.timedOutMessage())},restore:function(){this.original()&&this.value(this.original())}}}]).directive("title",["Title",function(e){return{restrict:"E",link:function(n,t,i){i.idleDisabled||(e.store(!0),n.$on("IdleWarn",function(n,t){e.setAsIdle(t)}),n.$on("IdleEnd",function(){e.restore()}),n.$on("IdleTimeout",function(){e.setAsTimedOut()}))}}}]),n.module("ngIdle.localStorage",[]).factory("IdleLocalStorage",["$window",function(e){function n(e){try{return JSON.parse(e,function(e,n){var t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(n);return t?new Date(n):n})}catch(n){return e}}var t=e.localStorage;return{set:function(e,n){t.setItem("ngIdle."+e,JSON.stringify(n))},get:function(e){var i=t.getItem("ngIdle."+e);return n(i)},remove:function(e){t.removeItem("ngIdle."+e)},parseJson:function(e){return n(e)}}}])}(window,window.angular);